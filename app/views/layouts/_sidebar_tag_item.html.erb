<%= turbo_frame_tag dom_id(tag) do %>
  <div class="flex items-center group relative">
    <%= link_to notes_path(tag: tag.name),
        class: "flex items-center flex-1 px-3 py-2 text-sm rounded-md transition-colors min-w-0 #{'bg-primary-100 text-primary-700' if params[:tag] == tag.name} #{'text-neutral-600 hover:text-neutral-900 hover:bg-neutral-100' if params[:tag] != tag.name}" do %>
      <%= render "shared/svg/tag" %>
      <span class="flex-1 truncate"><%= tag.name %></span>
      <span class="ml-auto text-xs bg-neutral-200 text-neutral-700 px-2 py-0.5 rounded-full flex-shrink-0">
        <%= tag.notes.count %>
      </span>
    <% end %>

    <div class="hidden group-hover:flex items-center gap-1 absolute right-2 bg-neutral-50">
      <%= link_to edit_tag_path(tag),
          data: { turbo_frame: dom_id(tag) },
          class: "p-1 text-neutral-400 hover:text-primary-600 transition-colors",
          title: "Edit tag" do %>
        <%= render "shared/svg/edit" %>
      <% end %>

      <%= button_to tag_path(tag),
          method: :delete,
          data: {
            turbo_frame: "_top",
            turbo_confirm: "Are you sure you want to delete this tag? It will be removed from all notes and todos."
          },
          class: "p-1 text-neutral-400 hover:text-red-600 transition-colors",
          title: "Delete tag" do %>
        <%= render "shared/svg/trash" %>
      <% end %>
    </div>
  </div>
<% end %>
