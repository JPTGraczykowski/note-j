<aside class="hidden lg:flex lg:flex-col lg:w-64 lg:pb-4 lg:bg-neutral-50 lg:border-r lg:border-neutral-200">
  <div class="px-6 py-4">
    <!-- Main Navigation -->
    <div class="mb-6">
      <h3 class="text-xs font-semibold text-neutral-500 uppercase tracking-wide mb-3">Navigation</h3>
      <nav class="space-y-1">
        <!-- All Notes -->
        <%= link_to notes_path,
            class: "flex items-center px-3 py-2 text-sm rounded-md transition-colors #{current_page?(notes_path) && !params[:folder_id].present? && !params[:tag].present? ? 'bg-primary-100 text-primary-700' : 'text-neutral-600 hover:text-neutral-900 hover:bg-neutral-100'}" do %>
          <%= render "shared/svg/note" %>
          All Notes
          <span class="ml-auto text-xs bg-neutral-200 text-neutral-700 px-2 py-0.5 rounded-full">
            <%= current_user.notes.count %>
          </span>
        <% end %>

        <!-- Todos -->
        <a href="#" class="flex items-center px-3 py-2 text-sm rounded-md transition-colors text-neutral-600 hover:text-neutral-900 hover:bg-neutral-100">
          <%= render "shared/svg/todo" %>
          Todos
          <span class="ml-auto text-xs bg-neutral-200 text-neutral-700 px-2 py-0.5 rounded-full">
            <%= current_user.todos.count %>
          </span>
        </a>
      </nav>
    </div>

    <!-- Folders -->
    <div class="mb-6">
      <div class="flex items-center justify-between mb-3">
        <h3 class="text-xs font-semibold text-neutral-500 uppercase tracking-wide">Folders</h3>
        <%= button_to new_folder_path,
            method: :get,
            data: { turbo_frame: "modal" },
            class: "text-neutral-400 hover:text-primary-600 transition-colors hover:cursor-pointer",
            title: "Add new folder" do %>
          <%= render "shared/svg/plus" %>
        <% end %>
      </div>

      <div class="space-y-1 overflow-x-auto -mx-6 px-6" data-controller="folder-tree" id="folders_list">
        <% if current_user.folders.any? %>
          <% current_user.folders.root_folders.order(:name).each do |folder| %>
            <%= render 'layouts/sidebar_folder_item', folder: folder %>
          <% end %>
        <% else %>
          <p class="text-sm text-neutral-500 px-3 py-2" id="no_folders_message">No folders yet</p>
        <% end %>
      </div>
    </div>

    <!-- Tags -->
    <div class="mb-6">
      <div class="flex items-center justify-between mb-3">
        <h3 class="text-xs font-semibold text-neutral-500 uppercase tracking-wide">Tags</h3>
        <%= button_to new_tag_path,
            method: :get,
            data: { turbo_frame: "modal" },
            class: "text-neutral-400 hover:text-primary-600 transition-colors hover:cursor-pointer",
            title: "Add new tag" do %>
          <%= render "shared/svg/plus" %>
        <% end %>
      </div>

      <div class="space-y-1" id="tags_list">
        <% if current_user.tags.any? %>
          <% current_user.tags.popular.limit(6).each do |tag| %>
            <%= render "layouts/sidebar_tag_item", tag: tag %>
          <% end %>
        <% else %>
          <p class="text-sm text-neutral-500 px-3 py-2" id="no_tags_message">No tags yet</p>
        <% end %>
      </div>
    </div>
  </div>
</aside>
