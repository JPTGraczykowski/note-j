<%= turbo_frame_tag "modal" do %>
  <%= render "shared/modal", modal_id: "new_folder_modal", title: "Create New Folder" do %>
    <div data-controller="folder-editor">
      <%= form_with model: @folder, class: "flex flex-col gap-4" do |f| %>
        <div>
          <%= f.label :name, "Folder Name", class: "block text-sm font-medium text-neutral-700 mb-2" %>
          <%= f.text_field :name,
              placeholder: "Enter folder name...",
              class: "w-full px-3 py-2 text-sm border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",
              data: { folder_editor_target: "input", action: "keydown.esc->folder-editor#cancelModal" },
              autofocus: true %>
        </div>
        <div>
          <%= f.label :parent_id, "Parent Folder", class: "block text-sm font-medium text-neutral-700 mb-2" %>
          <%= f.select :parent_id,
              options_from_collection_for_select(current_user.folders.order(:name), :id, :name, @folder.parent_id),
              { prompt: "No parent" },
              { class: "w-full px-3 py-2 text-sm border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent" } %>
        </div>

        <div class="flex items-center gap-2 justify-end">
          <button type="button"
                  data-action="click->modal#close"
                  class="px-4 py-2 text-sm text-neutral-600 hover:text-neutral-900 transition-colors hover:cursor-pointer">
            Cancel
          </button>
          <%= f.submit "Create Folder",
              class: "px-4 py-2 text-sm bg-primary-600 text-white rounded-md hover:bg-primary-700 transition-colors hover:cursor-pointer" %>
        </div>
      <% end %>
    </div>
  <% end %>
<% end %>
